<!DOCTYPE html>
<html>
<head>
  <title>Raster DEM</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://cdn.klokantech.com/mapbox-gl-js/v0.47.0/mapbox-gl.js"></script>
  <link href="https://cdn.klokantech.com/mapbox-gl-js/v0.47.0/mapbox-gl.css" rel="stylesheet" />
  <style>
    #map {position: absolute; top: 50px; right: 0; bottom: 0; left: 0;}
  </style>
</head>
<body>
  <div id="map"></div>
  Direction: <input type="range" min="0" max="359" value="335" oninput="update()" id="dir" />
  Exaggeration: <input type="range" min="0" max="1" value="1" step="0.1" oninput="update()" id="exa" />
  B&amp;W: <input type="checkbox" onchange="update()" id="bw" />
  Dataset: <select onchange="update_dataset()" id="src">
    <option value="https://maps.tilehosting.com/data/terrain-rgb.json?key=mXcaKrAofa07Lt6VRgqC">Terrain RGB v1</option>
    <option value="https://maps.tilehosting.com/c/octogeo/data/terrain_rgb_v3.json?key=mXcaKrAofa07Lt6VRgqC" selected>Terrain RGB v3</option>
    <option value="https://maps.tilehosting.com/c/octogeo/data/terrain_rgb_lowres-v3.0-z0-z5-osm.json?key=mXcaKrAofa07Lt6VRgqC">Lowres v3 z0-z5</option>
    <option value="https://maps.tilehosting.com/c/octogeo/data/terrain_rgb_medium_v3.json?key=mXcaKrAofa07Lt6VRgqC">Mediumres v3 z0-z10</option>
  </select>
  <script>
    var update = function() {
      map.setPaintProperty(
        'hillshading',
        'hillshade-illumination-direction',
        parseFloat(document.getElementById('dir').value)
      );
      map.setPaintProperty(
        'hillshading',
        'hillshade-exaggeration',
        parseFloat(document.getElementById('exa').value)
      );

      // BW
      var bw = document.getElementById('bw').checked;
      map.setPaintProperty(
        'hillshading',
        'hillshade-highlight-color',
        bw ? '#FFFFFF' : 'hsla(141, 35%, 47%, 0.75)'
      );
      map.setPaintProperty(
        'hillshading',
        'hillshade-shadow-color',
        bw ? '#000000' : 'hsla(130, 43%, 11%, 0.9)'
      );
      map.setPaintProperty(
        'hillshading',
        'hillshade-accent-color',
        bw ? '#000000' : '#dcf193'
      );
    };
    var update_dataset = function() {
      var s = map.getStyle();
      s.sources['terrain-rgb'] = {
        type: 'raster-dem',
        url: document.getElementById('src').value
      }
      map.setStyle(s);
    };

    var map = new mapboxgl.Map({
      container: 'map',
      style: 'simple.json',
      hash: true,
      center: [8.5456, 47.3739],
      zoom: 8
    });
    map.once('styledata', function() {
      update_dataset();
      update();
    });
  </script>
</body>
</html>
