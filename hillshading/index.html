<!DOCTYPE html>
<html>
<head>
  <title>Raster DEM</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://cdn.maptiler.com/mapbox-gl-js/v0.53.0/mapbox-gl.js"></script>
  <link href="https://cdn.maptiler.com/mapbox-gl-js/v0.53.0/mapbox-gl.css" rel="stylesheet" />
  <style>
    #map {position: absolute; top: 50px; right: 0; bottom: 0; left: 0;}
  </style>
</head>
<body>
  <div id="map"></div>
  Direction: <input type="range" min="0" max="359" value="335" oninput="update()" id="dir" />
  Exaggeration: <input type="range" min="0" max="1" value="1" step="0.1" oninput="update()" id="exa" />
  B&amp;W: <input type="checkbox" onchange="update()" id="bw" />
  Dataset: <select onchange="update_dataset()" id="src">
    <option value="https://api.maptiler.com/tiles/terrain-rgb/tiles.json?key=mXcaKrAofa07Lt6VRgqC" selected>Production Terrain RGB</option>
    <option value="https://api.maptiler.com/tiles/c438b4c1-a74a-41b4-a526-087a03b0a3d7/tiles.json?key=7aik6nWjtgs9YBivx8Hr" >Aster v3 (Alps only)</option>
    <option value="https://api.maptiler.com/tiles/44bae667-0131-4018-b5dd-6438e16d0299/tiles.json?key=7aik6nWjtgs9YBivx8Hr">Aster v3 (Global test)</option>
    <option value="https://api.maptiler.com/tiles/6ec67bbd-b11b-447b-804b-2dffedf5202b/tiles.json?key=7aik6nWjtgs9YBivx8Hr">USGS NED 1/3 arc-second California</option>
    <option value="https://api.maptiler.com/tiles/1ea9fd78-eb33-45fc-bd00-d641fa3def30/tiles.json?key=7aik6nWjtgs9YBivx8Hr">USGS NED 1/3 arc-second New York</option>
    <option value="https://api.maptiler.com/tiles/48813bd2-a26e-4394-8889-f4968ce3daed/tiles.json?key=7aik6nWjtgs9YBivx8Hr">USGS NED 1/3 arc-second Colorado</option>
    <option value="https://api.maptiler.com/tiles/fc3e5e19-4588-4497-add5-26a36b9b44a0/tiles.json?key=7aik6nWjtgs9YBivx8Hr">USGS NED 1/3 arc-second Colorado - ZL12</option>
    <option value="https://api.maptiler.com/tiles/086bc51d-b64a-4544-9cff-adffe4cd42c5/tiles.json?key=7aik6nWjtgs9YBivx8Hr">Pathfinder - ZL10</option>
    <option value="https://api.maptiler.com/tiles/abb7f35d-15bd-4e62-89ef-cb50b52fe6cd/tiles.json?key=7aik6nWjtgs9YBivx8Hr">NASADEM ZL12 (Global test)</option>
    <option value="https://api.maptiler.com/tiles/97e8dad6-4194-49d2-b9dd-e3aff2a9df7e/tiles.json?key=7aik6nWjtgs9YBivx8Hr">EUDEM 1.1 (Global test)</option>
    <option value="https://api.maptiler.com/tiles/9f6955f2-11d4-466d-a359-450c36ddf475/tiles.json?key=7aik6nWjtgs9YBivx8Hr">JAXA (Global test)</option>
    <option value="https://api.maptiler.com/tiles/31ec8c14-d820-4a2e-8e96-114b7533a7a5/tiles.json?key=7aik6nWjtgs9YBivx8Hr">Jaxa + Pathfinder (Europe only test)</option>
    <option value="https://api.maptiler.com/tiles/eb1536a0-2c84-436b-9201-cf30a0f2ce09/tiles.json?key=7aik6nWjtgs9YBivx8Hr">Jaxa + Pathfinder (Gauss sigma10)</option>
    <option value="https://api.maptiler.com/tiles/90d235c2-9e36-4703-b557-e22a6187fd2c/tiles.json?key=7aik6nWjtgs9YBivx8Hr">Jaxa + Pathfinder (Gauss sigma50)</option>
    <option value="https://api.maptiler.com/tiles/9a6ab692-abf3-4179-9318-2a8c45cec170/tiles.json?key=7aik6nWjtgs9YBivx8Hr">Jaxa + Pathfinder (Gauss sigma100)</option>
    <option value="https://api.maptiler.com/tiles/c0034042-7fdd-47f1-bb19-2990d7c6af68/tiles.json?key=7aik6nWjtgs9YBivx8Hr">Jaxa Sigma 5</option>
    <option value="https://api.maptiler.com/tiles/39efff18-cfc2-4c69-b9d4-e61b1939fdbe/tiles.json?key=7aik6nWjtgs9YBivx8Hr">Jaxa Sigma 1</option>
    <option value="https://api.maptiler.com/tiles/7a459662-35cf-4e86-9877-b9537e964f8e/tiles.json?key=7aik6nWjtgs9YBivx8Hr">Jaxa Sigma 0.3</option>
    <option value="https://api.maptiler.com/tiles/ece40ec5-b2ea-4697-af92-bc2918c2b5f2/tiles.json?key=7aik6nWjtgs9YBivx8Hr">Jaxa + Viewfinder (Gauss, varying sigma, window 5)</option>
    <option value="https://api.maptiler.com/tiles/2cf4e704-1813-41cf-a410-2511660e52c3/tiles.json?key=7aik6nWjtgs9YBivx8Hr">Jaxa + Viewfinder (Gauss, varying sigma, window 7)</option>
    <option value="https://api.maptiler.com/tiles/6ffce669-2e80-4887-9fea-3165f9049931/tiles.json?key=7aik6nWjtgs9YBivx8Hr">Jaxa + Viewfinder (gauss, vayring sigma, exponential sigma)</option>
    <option value="https://api.maptiler.com/tiles/d57539be-6fb3-404f-bf20-ac5e80fbb203/tiles.json?key=7aik6nWjtgs9YBivx8Hr">Jaxa + Viewfinder (gauss, sigma 5)</option>
    <option value="https://api.maptiler.com/tiles/a0a7ade8-74f5-4d93-9a33-014fd8a54028/tiles.json?key=7aik6nWjtgs9YBivx8Hr">Jaxa + Viewfinder (gauss, sigma 0.3)</option>
    <option value="https://api.maptiler.com/tiles/752f5eda-dba8-48ce-a2b5-71f5d71c31f1/tiles.json?key=7aik6nWjtgs9YBivx8Hr">Jaxa + Viewfinder (adaptive gauss)</option>
    <option value="https://api.maptiler.com/tiles/299f21fa-a880-4b22-a843-0361d8a2e238/tiles.json?key=7aik6nWjtgs9YBivx8Hr">Jaxa + Viewfinder (adaptive gauss, cubicspline)</option>
  </select>
  <script>
    var update = function() {
      map.setPaintProperty(
        'hillshading',
        'hillshade-illumination-direction',
        parseFloat(document.getElementById('dir').value)
      );
      map.setPaintProperty(
        'hillshading',
        'hillshade-exaggeration',
        parseFloat(document.getElementById('exa').value)
      );

      // BW
      var bw = document.getElementById('bw').checked;
      map.setPaintProperty(
        'hillshading',
        'hillshade-highlight-color',
        bw ? '#FFFFFF' : 'hsla(141, 35%, 47%, 0.75)'
      );
      map.setPaintProperty(
        'hillshading',
        'hillshade-shadow-color',
        bw ? '#000000' : 'hsla(130, 43%, 11%, 0.9)'
      );
      map.setPaintProperty(
        'hillshading',
        'hillshade-accent-color',
        bw ? '#000000' : '#dcf193'
      );
    };
    var update_dataset = function() {
      var s = map.getStyle();
      s.sources['terrain-rgb'] = {
        type: 'raster-dem',
        url: document.getElementById('src').value
      }
      map.setStyle(s);
    };

    var map = new mapboxgl.Map({
      container: 'map',
      style: 'simple.json',
      hash: true,
      center: [8.5456, 47.3739],
      zoom: 8
    });
    map.once('styledata', function() {
      update_dataset();
      update();
    });
  </script>
</body>
</html>
