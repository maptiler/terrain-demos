<!DOCTYPE html>
<html>
<head>
  <title>Raster DEM</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://cdn.maptiler.com/mapbox-gl-js/v0.53.0/mapbox-gl.js"></script>
  <link href="https://cdn.maptiler.com/mapbox-gl-js/v0.53.0/mapbox-gl.css" rel="stylesheet" />
  <style>
    #map {position: absolute; top: 50px; right: 0; bottom: 0; left: 0;}
  </style>
</head>
<body>
  <div id="map"></div>
  Direction: <input type="range" min="0" max="359" value="335" oninput="update()" id="dir" />
  Exaggeration: <input type="range" min="0" max="1" value="1" step="0.1" oninput="update()" id="exa" />
  B&amp;W: <input type="checkbox" onchange="update()" id="bw" />
  Dataset: <select onchange="update_dataset()" id="src">
    <option
    value="https://api.maptiler.com/tiles/terrain-rgb/tiles.json?key=mXcaKrAofa07Lt6VRgqC" selected>Production Terrain RGB</option>
    <option value="https://api.maptiler.com/tiles/c438b4c1-a74a-41b4-a526-087a03b0a3d7/tiles.json?key=7aik6nWjtgs9YBivx8Hr" >Aster v3</option>
    <option value="https://api.maptiler.com/tiles/6ec67bbd-b11b-447b-804b-2dffedf5202b/tiles.json?key=7aik6nWjtgs9YBivx8Hr">USGS NED 1/3 arc-second California</option>
    <option value="https://api.maptiler.com/tiles/1ea9fd78-eb33-45fc-bd00-d641fa3def30/tiles.json?key=7aik6nWjtgs9YBivx8Hr">USGS NED 1/3 arc-second New York</option>
    <option value="https://api.maptiler.com/tiles/48813bd2-a26e-4394-8889-f4968ce3daed/tiles.json?key=7aik6nWjtgs9YBivx8Hr">USGS NED 1/3 arc-second Colorado</option>
    <option value="https://api.maptiler.com/tiles/fc3e5e19-4588-4497-add5-26a36b9b44a0/tiles.json?key=7aik6nWjtgs9YBivx8Hr">USGS NED 1/3 arc-second Colorado - ZL12</option>
    <option value="https://api.maptiler.com/tiles/086bc51d-b64a-4544-9cff-adffe4cd42c5/tiles.json?key=7aik6nWjtgs9YBivx8Hr">Pathfinder - ZL10</option>
  </select>
  <script>
    var update = function() {
      map.setPaintProperty(
        'hillshading',
        'hillshade-illumination-direction',
        parseFloat(document.getElementById('dir').value)
      );
      map.setPaintProperty(
        'hillshading',
        'hillshade-exaggeration',
        parseFloat(document.getElementById('exa').value)
      );

      // BW
      var bw = document.getElementById('bw').checked;
      map.setPaintProperty(
        'hillshading',
        'hillshade-highlight-color',
        bw ? '#FFFFFF' : 'hsla(141, 35%, 47%, 0.75)'
      );
      map.setPaintProperty(
        'hillshading',
        'hillshade-shadow-color',
        bw ? '#000000' : 'hsla(130, 43%, 11%, 0.9)'
      );
      map.setPaintProperty(
        'hillshading',
        'hillshade-accent-color',
        bw ? '#000000' : '#dcf193'
      );
    };
    var update_dataset = function() {
      var s = map.getStyle();
      s.sources['terrain-rgb'] = {
        type: 'raster-dem',
        url: document.getElementById('src').value
      }
      map.setStyle(s);
    };

    var map = new mapboxgl.Map({
      container: 'map',
      style: 'simple.json',
      hash: true,
      center: [8.5456, 47.3739],
      zoom: 8
    });
    map.once('styledata', function() {
      update_dataset();
      update();
    });
  </script>
</body>
</html>
